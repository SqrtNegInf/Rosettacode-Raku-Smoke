#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Strip_control_codes_and_extended_characters_from_a_string
#c# 2016-03-19 <RC, 2018-04-08 <RC
#m# MOAR: OK
#j#  JVM: OK

srand 123456;

my $str = (0..400).roll(80)Â».chr.join;

say $str;
#say '====';
#say $str.subst(/<[ ^@..^_ ]>/, '', :g); # how to enter control chars? 
say $str.subst(/<:Cc>/,     '', :g); # unicode property: control character
say '----';
say my $result = $str.subst(/<-[ \ ..~ ]>/, '', :g);

my $moar-terminal = 'PHGJh 2)G[yrlJnq3hY^:=';
my $moar-cronjob  = 'Yh 2)G[yrlJnq3hY^:=a';
my $jvm           = q[zk{k)ug_%S!Yj'mp#?0$i];

use Test;
is $result, chomp $*VM ~~ /jvm/ ?? $jvm !! $*IN.t ?? $moar-terminal !! $moar-cronjob;
