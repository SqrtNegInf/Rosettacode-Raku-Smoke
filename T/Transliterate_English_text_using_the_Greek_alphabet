#!/usr/bin/env raku
#u# http://rosettacode.org/wiki/Transliterate_English_text_using_the_Greek_alphabet
#c# 2022-06-18 <RC
#m# MOAR: OK
#j# JVM:  OK
#f# RC file: transliterate-greek.txt
#n# Greek translation differs between runs?

sub to-Greek (Str $string is copy) {
    my %pre = :Ph<F>, :ck<k>, :ee<h>, :J<I>, :rh<r>,:oo<w>, :ph<f>, 's ' => 'Ï ';
    my %post =
    :ch<Ï>, :th<Î¸>, :ps<Ï>, :Ch<Î§>, :Th<Î>, :Ps<Î¨>, :kh<Ï>, :a<Î±>, :b<Î²>, :d<Î´>,
    :e<Îµ>, :f<Ï>, :g<Î³>, :h<Î·>, :i<Î¹>, :j<Î¹>, :k<Îº>, :l<Î»>, :m<Î¼>, :n<Î½>, :o<Î¿>,
    :p<Ï>, :q<Îº>, :r<Ï>, :s<Ï>, :t<Ï>, :u<Ï>, :v<Î²>, :w<Ï>, :x<Î¾>, :y<Ï>, :z<Î¶>,
    :A<Î>, :B<Î>, :D<Î>, :E<Î>, :F<Î¦>, :G<Î>, :H<Î>, :I<Î>, :L<Î>, :M<Î>, :N<Î>,
    :O<Î>, :P<Î>, :Q<Î>, :R<Î¡>, :S<Î£>, :T<Î¤>, :U<Î¥>, :W<Î©>, :X<Î>, :Z<Î>;

    $string.=subst(:g, .key, .value ) for flat %pre, %post;
    $string
}

my $text = chomp q:to/ENGLISH/;
    The quick brown fox jumped over the lazy dog.

    I was looking at some rhododendrons in my back garden,
    dressed in my khaki shorts, when the telephone rang.

    As I answered it, I cheerfully glimpsed that the July sun
    caused a fragment of black pine wax to ooze on the velvet quilt
    laying in my patio.

    sphinx of black quartz, judge my vow.
    ENGLISH

my $out = open('run/transliterate-greek.txt', :w);

$out.say: "English:\n\n" ~ $text ~ "\n" ~ '=' x 80;

#$out.say: "\"Greek\":\n\n" ~ $text.&to-Greek ~ "\n" ~ '=' x 80;

$out.say: "Or, to named characters:\n\n$_\n" ~
  .&to-Greek.comb.map({ .match(/\W/) ?? $_ !!
      '<' ~ .uniname.subst( /.+<?after LETTER\s>/).lc ~ '>'
  }).join
  given 'sphinx of black quartz, judge my vow.';
