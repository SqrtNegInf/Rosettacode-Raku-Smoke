#!/usr/bin/env raku
#t# skiptest
#c# 2022-12-19
#n# bug sources: P/Prime_words, bin/rc-non-ascii, PWC/019/1/fjwhittle.raku
#n# seen to fail under both MoarVM 2022.12 and blead (well, moar-HEAD-HEAD-HEAD) 
#n# problem NOT seen in v2022.12-1-gd52342eb0 (last blead version from before master->main switch)
#n# segfaults more when too much data in pipeline, except when, annoyingly, refuses to die, and works fine (about 50% of the time)
#n# (in contrast, 'bin/rc-non-ascii' reliably croaks, very nearly 100% of the time)

 say ('a'...'z').words.grep({ .ords.all.is-prime });        # OK
 say ('aa'...'gg').words.grep({ .ords.all.is-prime });      # probably
 say ('aa'...'zz').words.grep({ .ords.all.is-prime });      # maybe not
 say ('aaa'...'zzz').words.grep({ .ords.all.is-prime });    # usually not
 say ('aaaa'...'zzzz').words.grep({ .ords.all.is-prime });  # no, almost always

#likewise:
#say ('a'...'z').words.grep({ .ords.sort.head > 120 });
#say ('aa'...'zz').words.grep({ .ords.sort.head > 120 });
#say ('aaa'...'zzz').words.grep({ .ords.sort.head > 120 });
#etc...
