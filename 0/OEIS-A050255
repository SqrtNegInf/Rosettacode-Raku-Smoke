#!/usr/bin/env raku
#u# https://oeis.org/A050255
#t# inprogress
#c# 2023-01-05 NOT ON RC
#m# MOAR: OK
#j#  JVM: OK
#n# OEIS:A050255 Diaconis-Mosteller approximation to the Birthday problem function

my @res;

#   a(n) is ceiling(x), where x is the real solution to x*exp(-x/(365*n)) = (log(2)*365^(n-1)*n!*(1 - x/(365*(n+1))))^(1/n)

#push @res: 

sub postfix:<!> ( UInt:D $n ) is looser(&prefix:<->) { [Ã—] 2..$n }

my $k = 2;
my $d = 365;
my $p = 0.5;

for 19..25 -> $n {
say $n;
say my $a = $n * (e**-($n/$d*$k));
say my $b = ( $d**($k-1) * ($k!) * log(1/(1-$p)) * (1 - ( $n / $d*($k+1) ) ) ) ** (1/$k);
#say $n and exit if $a > $b;
say '';
}

=finish

say my $result = @res.join: ' ';

use Test;
is $result, '1, 23, 88, 187, 313, 459, 622, 797, 983, 1179, 1382, 1592, 1809, 2031, 2257, 2489, 2724, 2963, 3205, 3450, 3698, 3949';
