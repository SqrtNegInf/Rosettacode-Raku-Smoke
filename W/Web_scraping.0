#!/usr/bin/env raku
#n# NOT CURRENT, NOT SMOKE-TESTED
#u# http://rosettacode.org/wiki/Web_scraping
#c# 2021-03-01 <RC
#m# MOAR: BROKEN OK
#j# JVM:  BROKEN OK
#n# current on RC

my @res;


use HTTP::Client; # https://github.com/supernovus/perl6-http-client/

my $site = "https://www.utctime.net/";
my $matched = HTTP::Client.new.get($site).content.match(
   /'<td>UTC</td><td>'( .*Z )'</td>'/
)[0];

say $matched;
#$matched = '12321321:412312312 123';
with DateTime.new($matched.Str) {
   say 'The fetch result seems to be of a valid time format.'
} else {
   CATCH { put .^name, ': ', .Str }
}

Output:
｢2021-03-01T17:02:37Z｣
The fetch result seems to be of a valid time format.



END

.say for @res;
my $ref = q:to/END/;

use Test;
#my $ref = $*VM ~~ /jvm/ ?? $jvm !! $moar;
#is @res.join("\n"), chomp $ref;
