#!/usr/bin/env raku
#u# http://rosettacode.org/wiki/Cousin_primes
#c# 2021-03-18 <RC
#m# MOAR: OK
#j# JVM:  OK
#n# OEIS:A094343 List of pairs of primes (p, q) with q - p = 4.
#n# OEIS:A023200 Primes p such that p + 4 is also prime.
#n# OEIS:A046132 Larger member p+4 of cousin primes (p, p+4).
#n# A094343 == A023200 ∪ A046132 

my @res;

say my $result = grep *.all.is-prime, map { $_, $_+4 }, 2..999;

constant @cousins = (3, 7, *+6 … *).map: -> \n { (n, n+4) if (n & n+4).is-prime };

my $count = @cousins.first: :k, *.[0] > 1000;

@res.push: $_.gist for @cousins.head($count).batch(9);

my $ref1 = q:to/END/;
((3 7) (7 11) (13 17) (19 23) (37 41) (43 47) (67 71) (79 83) (97 101) (103 107) (109 113) (127 131) (163 167) (193 197) (223 227) (229 233) (277 281) (307 311) (313 317) (349 353) (379 383) (397 401) (439 443) (457 461) (463 467) (487 491) (499 503) (613 617) (643 647) (673 677) (739 743) (757 761) (769 773) (823 827) (853 857) (859 863) (877 881) (883 887) (907 911) (937 941) (967 971))
END

my $ref2 = q:to/END/;
((3 7) (7 11) (13 17) (19 23) (37 41) (43 47) (67 71) (79 83) (97 101))
((103 107) (109 113) (127 131) (163 167) (193 197) (223 227) (229 233) (277 281) (307 311))
((313 317) (349 353) (379 383) (397 401) (439 443) (457 461) (463 467) (487 491) (499 503))
((613 617) (643 647) (673 677) (739 743) (757 761) (769 773) (823 827) (853 857) (859 863))
((877 881) (883 887) (907 911) (937 941) (967 971))
END

use Test;
is $result.gist, chomp $ref1;
is @res.join("\n"), chomp $ref2;
