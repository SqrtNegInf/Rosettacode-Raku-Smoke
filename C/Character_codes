#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Character_codes
#c# 2019-11-07 <RC
#m# MOAR: OK
#j# JVM:  BROKEN

my @res;

for 'AÎ‘Ğğªš¥ğŸ‡ºğŸ‡¸ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦'.comb {
    @res.push: $_ for 
    ['Character:', 'Character name:', 'Ordinal(s):', 'Hex ordinal(s):', 'UTF-8:', 'Round trip:']Â».fmt('%15s')
    Z [$_, .uninames, .ords, .ords.fmt('0x%X'), .encode('UTF8')Â».base(16), .ords.chrs];
    @res.push: '';
}

.say for @res;

my $ref = q:to/END/;
     Character: A
Character name: LATIN CAPITAL LETTER A
    Ordinal(s): 65
Hex ordinal(s): 0x41
         UTF-8: 41
    Round trip: A

     Character: Î‘
Character name: GREEK CAPITAL LETTER ALPHA
    Ordinal(s): 913
Hex ordinal(s): 0x391
         UTF-8: CE 91
    Round trip: Î‘

     Character: Ğ
Character name: CYRILLIC CAPITAL LETTER A
    Ordinal(s): 1040
Hex ordinal(s): 0x410
         UTF-8: D0 90
    Round trip: Ğ

     Character: ğªš¥
Character name: CJK UNIFIED IDEOGRAPH-2A6A5
    Ordinal(s): 173733
Hex ordinal(s): 0x2A6A5
         UTF-8: F0 AA 9A A5
    Round trip: ğªš¥

     Character: ğŸ‡ºğŸ‡¸
Character name: REGIONAL INDICATOR SYMBOL LETTER U REGIONAL INDICATOR SYMBOL LETTER S
    Ordinal(s): 127482 127480
Hex ordinal(s): 0x1F1FA 0x1F1F8
         UTF-8: F0 9F 87 BA F0 9F 87 B8
    Round trip: ğŸ‡ºğŸ‡¸

     Character: ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦
Character name: MAN ZERO WIDTH JOINER WOMAN ZERO WIDTH JOINER GIRL ZERO WIDTH JOINER BOY
    Ordinal(s): 128104 8205 128105 8205 128103 8205 128102
Hex ordinal(s): 0x1F468 0x200D 0x1F469 0x200D 0x1F467 0x200D 0x1F466
         UTF-8: F0 9F 91 A8 E2 80 8D F0 9F 91 A9 E2 80 8D F0 9F 91 A7 E2 80 8D F0 9F 91 A6
    Round trip: ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦

END
my $xef = q:to/END/;
     Character: A
Character name: LATIN CAPITAL LETTER A
    Ordinal(s): 65
Hex ordinal(s): 0x41
         UTF-8: 41
    Round trip: A

     Character: Î‘
Character name: GREEK CAPITAL LETTER ALPHA
    Ordinal(s): 913
Hex ordinal(s): 0x391
         UTF-8: CE 91
    Round trip: Î‘

     Character: Ğ
Character name: CYRILLIC CAPITAL LETTER A
    Ordinal(s): 1040
Hex ordinal(s): 0x410
         UTF-8: D0 90
    Round trip: Ğ

     Character: ğªš¥
Character name: <CJK Ideograph Extension B-2A6A5>
    Ordinal(s): 173733
Hex ordinal(s): 0x2A6A5
         UTF-8: F0 AA 9A A5
    Round trip: ğªš¥

     Character: ğŸ‡ºğŸ‡¸
Character name: REGIONAL INDICATOR SYMBOL LETTER U REGIONAL INDICATOR SYMBOL LETTER S
    Ordinal(s): 127482 127480
Hex ordinal(s): 0x1F1FA 0x1F1F8
         UTF-8: F0 9F 87 BA F0 9F 87 B8
    Round trip: ğŸ‡ºğŸ‡¸

     Character: ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦
Character name: MAN ZERO WIDTH JOINER WOMAN ZERO WIDTH JOINER GIRL ZERO WIDTH JOINER BOY
    Ordinal(s): 128104 8205 128105 8205 128103 8205 128102
Hex ordinal(s): 0x1F468 0x200D 0x1F469 0x200D 0x1F467 0x200D 0x1F466
         UTF-8: F0 9F 91 A8 E2 80 8D F0 9F 91 A9 E2 80 8D F0 9F 91 A7 E2 80 8D F0 9F 91 A6
    Round trip: ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦

END

use Test;
#my $ref = $*VM ~~ /jvm/ ?? $jvm !! $moar;
is @res.join("\n"), chomp $ref;
