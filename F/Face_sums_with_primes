#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/xx
#t# inprogress
#c# 2022-02-19 NOT ON RC
#m# MOAR: OK
#j#  JVM: BROKEN
#n# https://fivethirtyeight.com/features/can-you-prime-the-cube/

my @primes = (^100).grep(*.is-prime).skip(1);

my @faces = (0, 1, 2, 3), (0, 3, 7, 4), (0, 4, 5, 1), (1, 2, 6, 5), (2, 3, 7, 6), (6, 7, 4, 5);
say my $vertices = 1 + [max] @faces.map:{ .max };
#say my $vertices = 1 + [max] gather @faces.deepmap: { take max @$_ };

my @perms = (^$vertices).permutations;

for ($vertices..âˆž) {
    @primes[0..$_].combinations($vertices).race(:1batch).map: -> @candidates {
        face-sums @candidates;
    }
}

sub face-sums (@primes-to-test) {
    #for (^$vertices).permutations -> @p  { # little slower
    for @perms -> @p  {
        next unless [==] map { [+] (@primes-to-test[@p])[@$_] }, @faces;
        die "WOO! " ~ @p Z @primes-to-test[@p];
    }
}
