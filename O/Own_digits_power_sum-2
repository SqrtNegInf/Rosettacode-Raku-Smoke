#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Own_digits_power_sum
#c# 2021-10-25 NOT ON RC
#m# MOAR: OK
#j# JVM:  BROKEN
#n# 'race' is just a band-aid over the expressive but non-performant code

my @n[100];
my atomicint $i;

my $lo = 3;
my $hi = 5;

( 10**($lo-1) .. 10**$hi - 1 ).race.map: -> $n {
    @n[$iâš›++] = $n if $n == sum $n.comb X** $_ for $lo..$hi
}

#.say for @n.grep(so *).sort;
say my $result = @n.grep(so *).sort.join("\n");

my $ref = q:to/END/;
153
370
371
407
1634
4150
4151
8208
9474
54748
92727
93084
END

use Test;
is $result, chomp $ref;
