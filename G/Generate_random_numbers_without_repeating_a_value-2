#!/usr/bin/env raku
#u# http://rosettacode.org/wiki/Generate_random_numbers_without_repeating_a_value
#c# 2021-08-28 <RC
#m# MOAR: OK
#j# JVM:  BROKEN
#n# illustrate use of enhanced 'pick'
#n# and illustrate another 'srand' fragility...

#use v6.e.PREVIEW; 

srand 123456;

my @res.push: $_ for (1..20).pick(**).[^100].batch(20);

.say for @res;

my $ref = q:to/END/; # no .e.PREVIEW
6 5 17 11 14 15 10 3 7 13 4 18 12 16 2 9 1 8 19 20
4 5 10 20 3 17 1 6 18 15 13 8 12 9 7 19 2 16 11 14
8 6 3 4 20 5 19 11 1 13 14 18 15 7 16 17 12 9 2 10
17 12 5 15 19 13 16 7 20 14 8 6 11 1 10 9 3 2 4 18
14 2 13 8 16 1 17 10 7 11 4 3 6 20 9 15 19 18 5 12
END

my $xef = q:to/END/; # with .e.PREVIEW
16 13 4 10 9 11 8 5 17 7 19 1 2 20 18 15 3 12 6 14
20 14 17 16 13 3 18 9 11 8 2 15 12 19 10 6 4 5 7 1
14 5 11 19 7 17 13 16 3 6 12 10 1 20 2 18 9 8 4 15
1 9 15 6 19 13 10 14 12 11 5 16 17 8 3 2 20 4 7 18
9 16 1 19 20 4 17 13 10 8 3 11 14 18 5 15 2 12 6 7
END

use Test;
is @res.join("\n"), chomp $ref;
