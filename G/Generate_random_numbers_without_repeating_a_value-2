#!/usr/bin/env raku
#u# http://rosettacode.org/wiki/Generate_random_numbers_without_repeating_a_value
#c# 2021-08-28 <RC
#m# MOAR: OK
#j# JVM:  BROKEN
#n# illustrate use of enhanced 'pick' (and illustrate another 'srand' fragility...)

use v6.e.PREVIEW; 

srand 123456;

my @res.push: $_ for (1..20).pick(**).[^100].batch(20);

.put for @res;

my $moar-terminal = q:to/END/;
5 11 10 13 9 20 12 8 6 1 2 19 15 16 17 7 14 3 18 4
19 18 14 3 15 11 13 9 2 4 10 16 17 12 6 20 5 8 7 1
12 5 8 19 14 18 4 7 3 16 2 9 10 15 11 1 17 6 20 13
17 7 10 15 11 16 13 14 6 20 8 18 4 2 1 12 19 5 3 9
1 18 10 4 19 15 12 9 3 13 16 20 7 5 2 8 14 17 6 11
END

my $moar-cronjob = q:to/END/;
16 11 9 1 3 17 8 15 18 13 20 12 14 5 6 7 4 19 2 10
18 13 2 6 16 17 5 3 12 7 9 10 15 20 4 11 14 1 8 19
5 10 4 6 2 15 3 18 7 14 16 11 1 13 20 19 9 12 17 8
19 20 9 17 12 16 6 4 2 3 5 11 13 14 1 10 18 7 15 8
17 13 5 14 16 1 12 8 4 10 19 11 7 20 9 6 3 2 18 15
END

use Test;
is @res.join("\n"), chomp $*IN.t ?? $moar-terminal !! $moar-cronjob;
