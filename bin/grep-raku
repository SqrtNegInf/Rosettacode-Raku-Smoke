#!/usr/local/bin/perl
## grep Rosettacode Raku code, matching plain-text and Unicode forms
#  2019-10-29
#  being just a 'grep', finds strings, not necessarily operators 
#  (e.g. no 'РіЇ' in either form, but plenty of '(.)' for single-char capture
#  input patterns must escape ususual suspects: '^', '.', '$', etc.

use strict;
use warnings;

my $p = shift || die;

# hypers (first two are very common, rest very rare)
$p =~ s/(┬╗|>>)/(┬╗|>>)/g;
$p =~ s/(┬Ф|<<)/(┬Ф|<<)/g;
$p =~ s/(┬Ф=┬Ф|<<\[=\]<<)/(┬Ф=┬Ф|<<\\[=\\]<<)/g;
$p =~ s/(┬╗=┬╗|>>\[=\]>>)/(┬╗=┬╗|>>\\[=\\]>>)/g;
$p =~ s/(┬Ф=┬╗|<<\[=\]>>)/(┬Ф=┬╗|<<\\[=\\]>>)/g;
$p =~ s/(┬╗=┬Ф|>>\[=\]<<)/(┬╗=┬Ф|>>\\[=\\]<<)/g;

# math
$p =~ s/(РЅЦ|>=)/(>=|РЅЦ)/g;
$p =~ s/(РЅц|<=)/(<=|РЅц)/g;
$p =~ s/(РЅЁ|=~=)/(=~=|РЅЁ)/g;
$p =~ s/(Рѕъ|\bInf\b)/(Рѕъ|\\bInf\\b)/g;

# bare ranges need special handling
if ($p =~ /^(Рђд|\.\.\.)$/) {
    $p =~ s/(Рђд|\.\.\.)/[^.](Рђд|\\.\\.\\.)[^.]/g;
} elsif ($p =~ /^\\.\\.$/) {
    $p =~ s/\\.\\./[^.]\\.\\.[^.]/g;
}

# set (just one-way transform)
$p =~ s/Рѕќ/(Рѕќ|\\(-\\))/g;
$p =~ s/Рѕѕ/(Рѕѕ|\\(elem\\))/g;
$p =~ s/РѕЅ/(РѕЅ|!\\(elem\\))/g;
$p =~ s/РѕІ/(РѕІ|\\(cont\\))/g;
$p =~ s/Ріє/(Ріє|!\\(<=\\))/g;
$p =~ s/Ріѕ/(Ріѕ|!\\(<=\\))/g;
$p =~ s/Ріѓ/(Ріѓ|\\(<\\))/g;
$p =~ s/Ріё/(Ріё|!\\(<\\))/g;
$p =~ s/РіЄ/(РіЄ|\\(>=\\))/g;
$p =~ s/РіЅ/(РіЅ|!\\(>=\\))/g;
$p =~ s/РіЃ/(РіЃ|\\(>\\))/g;
$p =~ s/РіЁ/(РіЁ|!\\(>\\))/g;
$p =~ s/Рѕф/(Рѕф|\\(\\|\\))/g;
$p =~ s/РѕЕ/(РѕЕ|\\(&\\))/g;
$p =~ s/Ріќ/(Ріќ|\\(^\\))/g;
$p =~ s/РіЇ/(РіЇ|\\(\\.\\))/g;
$p =~ s/Ріј/(Ріј|\\(\\+\\))/g;

# Unicode groups
$p =~ s/U:SUPER/(РЂ░|┬╣|┬▓|┬│|РЂ┤|РЂх|РЂХ|РЂи|РЂИ|РЂ╣|рхќ|┬░|┬»|РЂ╗|РЂ║)/i;
$p =~ s/U:GREEK/(╬Њ|╬ћ|╬ў|╬Џ|╬ъ|╬а|╬Б|╬д|╬е|╬Е|╬▒|╬▓|╬│|╬┤|╬х|╬Х|╬и|╬И|╬╣|╬║|╬╗|╬╝|╬й|╬Й|╬┐|¤ђ|¤Ђ|¤Ѓ|¤ё|¤Ё|¤є|¤Є|¤ѕ|¤Ѕ|¤Ћ)/i;
$p =~ s/U:MATH/(РЅц|РЅЦ|├и|├Ќ|РЅѕ|РЅЁ|рљЂ|Рѕџ|РѕФ|књ|­ЮЉњ|Рѕъ|Рћѓ|Рѕў|РѕЎ|┬и|РІЁ)/i; # 3 different 'dots'
$p =~ s/U:SET/(Рѕѕ|РѕЅ|РѕІ|Рѕї|Ріє|Ріѕ|Ріѓ|Ріё|РіЄ|РіЅ|РіЃ|РіЁ|Рѕф|РѕЕ|Рѕќ|Ріќ|РіЇ|Ріј|├И|Рѕњ)/i;
$p =~ s/U:LOGIC/(┬г|Рѕе|РѕД|РЄњ|Рєњ|РЅА|├И)/i;
$p =~ s/U:BOLD/(РёЮ|­Юљи|­ЮЉ│|­ЮЉђ|­ЮЉЂ|­ЮЉЃ|­ЮЉё|­ЮЉЁ|­ЮЉє|­ЮЉј|­ЮЉЈ|­ЮЉљ|­ЮЉЏ|­ЮЉЮ|­ЮЉА)/i; # mostly bold/italic; likely incomplete

exec qq{ack '$p' [0-Z]};

__END__

РёЮ  # from S/Set_of_real_numbers

РЅ╝   (<+)  # gone?
РЅй   (>+)  # gone?

Рѕњ # set operation?
┬» РЂ╗ РЂ║ # seen only in strings

¤х ¤░ ¤Ћ ¤▒ ¤ќ ┬х # look Greek, but math 'symbols'

╬Љ ╬њ ╬Њ ╬ћ ╬Ћ ╬ќ ╬Ќ ╬ў ╬Ў ╬џ ╬Џ ╬ю ╬Ю ╬ъ ╬Ъ ╬а ╬А ╬Б ╬ц ╬Ц ╬д ╬Д ╬е ╬Е
╬▒ ╬▓ ╬│ ╬┤ ╬х ╬Х ╬и ╬И ╬╣ ╬║ ╬╗ ╬╝ ╬й ╬Й ╬┐ ¤ђ ¤Ђ ¤Ѓ ¤ё ¤Ё ¤є ¤Є ¤ѕ ¤Ѕ
